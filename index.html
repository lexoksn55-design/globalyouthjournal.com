<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GlobalYouthJournal</title>

<!-- Fonts (Google Fonts remote; allowed on GitHub Pages) -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --navy:#0D1B2A;
    --navy2:#14263E;
    --cream:#FDFBF7;
    --deep-cream:#E6E1D8;
    --light-blue:#A9D6E5;
    --brown:#B08968;
  }

  /* Reset & base */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;scroll-behavior:smooth}
  body{
    font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    color:var(--cream);
    text-align:center;
    overflow-x:hidden;
    /* animated blended radial background (edge-to-edge) */
    background:
      radial-gradient(circle at 20% 30%, var(--navy) 0%, rgba(13,27,42,0.0) 55%),
      radial-gradient(circle at 80% 20%, var(--navy2) 0%, rgba(20,38,62,0.0) 55%),
      radial-gradient(circle at 50% 80%, var(--deep-cream) 0%, rgba(230,225,216,0.0) 60%),
      radial-gradient(circle at 30% 60%, var(--light-blue) 0%, rgba(169,214,229,0.0) 60%),
      radial-gradient(circle at 70% 70%, var(--brown) 0%, rgba(176,137,104,0.0) 60%);
    background-size: 300% 300%;
    background-repeat:no-repeat;
    min-height:100vh;
    animation: bgShift 36s linear infinite;
  }

  @keyframes bgShift{
    0%{ background-position: 0% 50%, 50% 0%, 100% 100%, 0% 100%, 50% 50%;}
    50%{ background-position: 100% 50%, 0% 100%, 50% 0%, 100% 50%, 25% 75%;}
    100%{ background-position: 0% 50%, 50% 0%, 100% 100%, 0% 100%, 50% 50%;}
  }

  /* Header layout: brand left, nav centered, admin right */
  header{
    position:fixed; top:0; left:0; right:0;
    height:72px;
    background:rgba(10,18,26,0.65);
    backdrop-filter:blur(6px);
    border-bottom:1px solid rgba(255,255,255,0.03);
    z-index:1200;
  }
  .header-inner{
    height:100%;
    max-width:1180px;
    margin:0 auto;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 20px;
  }

  .brand{
    font-family:"Playfair Display",serif;
    font-size:1.35rem;
    color:var(--cream);
    letter-spacing:.4px;
    z-index:1300;
  }

  /* center nav using absolute centering so admin button doesn't shift it */
  nav.primary {
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:18px;
    align-items:center;
    justify-content:center;
    z-index:1250;
    pointer-events:all;
  }
  nav.primary a{
    color:var(--cream);
    text-decoration:none;
    font-weight:600;
    font-size:0.98rem;
    padding:6px 10px;
    border-radius:8px;
    opacity:0.98;
  }
  nav.primary a:hover{ color:var(--light-blue); background:rgba(255,255,255,0.03) }

  .right-controls{
    display:flex;
    gap:10px;
    align-items:center;
    z-index:1300;
  }

  .btn-rect{
    padding:8px 14px;
    border-radius:8px;
    background:none;
    border:2px solid var(--cream);
    color:var(--cream);
    font-weight:600;
    cursor:pointer;
    transition:all .18s ease;
    font-size:0.95rem;
  }
  .btn-rect:hover{ background:var(--cream); color:var(--navy) }

  /* main spacing */
  main{ padding-top:88px; min-height:calc(100vh - 88px) }

  section.page{
    min-height:calc(100vh - 88px);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:36px 20px;
    width:100%;
    box-sizing:border-box;
  }

  .title{
    font-family:"Playfair Display",serif;
    font-size:clamp(2rem,5vw,3rem);
    color:var(--cream);
    line-height:1.12;
    margin-bottom:14px;
  }

  .lead{
    font-size:clamp(1rem,2.2vw,1.15rem);
    color:rgba(255,255,255,0.92);
    max-width:740px;
    line-height:1.5;
    margin:0 auto;
    text-align:center;
  }

  /* filter buttons on Papers */
  .filter-btns{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:16px }
  .filter-btns button{
    padding:10px 18px; border-radius:10px; border:none; background:var(--navy2); color:var(--cream); font-weight:600; cursor:pointer;
  }
  .filter-btns button.active{ background:var(--light-blue); color:var(--navy) }

  /* papers list: ONLY title/author/date; click opens pdf in new tab */
  .papers-list{ margin-top:18px; display:flex; flex-direction:column; gap:12px; width:100%; max-width:900px; align-items:center }
  .paper-card{
    width:94%; background:linear-gradient(180deg,rgba(253,251,247,0.95),#f0ece6); color:var(--navy);
    border-radius:10px; padding:12px 16px; box-shadow:0 8px 30px rgba(2,6,12,0.12); cursor:pointer; text-align:left;
  }
  .paper-card h3{ margin:0 0 6px 0; font-family:"Playfair Display",serif; font-size:1.06rem; color:var(--navy) }
  .paper-meta{ font-size:0.92rem; color:rgba(0,0,0,0.7) }

  /* upload form */
  .upload-wrap{ width:100%; max-width:520px; margin-top:10px; display:flex; flex-direction:column; gap:10px; text-align:left }
  .upload-wrap input, .upload-wrap textarea, .upload-wrap select{
    padding:8px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.12); background:#fff; color:var(--navy)
  }

  /* modal */
  .modal-back{ position:fixed; inset:0; display:none; background:rgba(6,10,14,0.65); align-items:center; justify-content:center; z-index:1400 }
  .modal{ background:var(--cream); color:var(--navy); padding:16px; border-radius:10px; width:92%; max-width:420px; }

  /* small devices (mobile) */
  @media (max-width:720px){
    header{ height:auto; padding:10px 12px }
    .header-inner{ padding:8px 14px; align-items:center }
    /* position nav normally and hide/show with slide */
    nav.primary{
      position:relative;
      transform:none;
      left:auto;
      margin-top:10px;
      width:100%;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
      max-height:0;
      overflow:hidden;
      transition:max-height .36s ease;
      background:rgba(10,18,26,0.95);
      border-radius:8px;
      padding:0;
    }
    nav.primary.show{ max-height:420px; padding:8px 6px }

    /* brand stays left on mobile, controls centered below brand */
    .header-top{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .right-controls{ order:2; width:100%; justify-content:center; gap:8px; margin-top:8px }
    .btn-rect{ flex:1; max-width:220px; }

    /* make page content more vertically centered and slightly larger text */
    section.page{ min-height:calc(100vh - 140px); padding:20px 18px; justify-content:center; }
    .title{ font-size:clamp(1.8rem,6vw,2.4rem) }
    .lead{ font-size:clamp(1rem,2.8vw,1.15rem); width:100% }
    .paper-card{ text-align:center; }
  }

  /* prevent horizontal scrollbar weirdness */
  @media (any-hover: hover){
    /* nothing */
  }
</style>
</head>

<body>
  <header>
    <div class="header-inner">
      <div class="brand">Global Youth Journal</div>

      <!-- center nav on desktop; slide-down on mobile -->
      <nav id="primaryNav" class="primary" aria-label="Primary navigation">
        <a href="javascript:void(0)" onclick="showSection('home')">Home</a>
        <a href="javascript:void(0)" onclick="showSection('about')">About</a>
        <a href="javascript:void(0)" onclick="showSection('papers')">Papers</a>
        <a href="javascript:void(0)" onclick="showSection('submission')">Submission</a>
      </nav>

      <!-- right controls: menu toggle (mobile) + admin button -->
      <div class="right-controls" role="toolbar" aria-label="Site controls">
        <button id="menuToggle" class="btn-rect" aria-expanded="false" aria-controls="primaryNav">Menu</button>
        <button id="adminBtn" class="btn-rect" onclick="openAdminModal()">Admin Login</button>
      </div>
    </div>
  </header>

  <main>
    <!-- HOME -->
    <section id="home" class="page">
      <div>
        <div class="title">Empowering Young Minds, One Paper at a Time</div>
        <div class="lead">
          GlobalYouthJournal is a youth-led initiative providing a <strong>FREE</strong> platform for student researchers and journalists to publish their work. Made by youth, for youth — with a student review process that values learning and accessibility.
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="page" style="display:none">
      <div class="title">About Us</div>
      <div class="lead">
        The <strong>GlobalYouthJournal</strong> is a youth-led initiative that allows young, skilled researchers and journalists to publish their work without any fees — just a short student review period.
      </div>
    </section>

    <!-- PAPERS -->
    <section id="papers" class="page" style="display:none">
      <div class="title">Papers</div>
      <div class="filter-btns" role="tablist" aria-label="Filter papers">
        <button class="active" onclick="filterPapers('All')">All</button>
        <button onclick="filterPapers('Law/Politics')">Law/Politics</button>
        <button onclick="filterPapers('STEM')">STEM</button>
        <button onclick="filterPapers('Articles')">Articles</button>
      </div>

      <div id="papersList" class="papers-list" aria-live="polite"></div>
    </section>

    <!-- SUBMISSION -->
    <section id="submission" class="page" style="display:none">
      <div class="title">Submission</div>
      <div class="lead">To submit your research or journalistic work for review, please use our <a href="https://forms.gle/YxuU2xm9nnJsaJyb8" target="_blank" style="color:var(--light-blue)">Google Form</a>.</div>
    </section>

    <!-- ADMIN UPLOAD page -->
    <section id="submit" class="page" style="display:none">
      <div class="title">Admin Upload</div>
      <div class="lead">Only admins can upload PDFs for display on the Papers page.</div>

      <form id="uploadForm" class="upload-wrap" style="display:none" onsubmit="event.preventDefault(); submitPaper();">
        <label>Paper Title <input id="paperTitle" type="text" required></label>
        <label>Author(s) <input id="paperAuthor" type="text" required></label>
        <label>Date <input id="paperDate" type="date" required></label>
        <label>Category
          <select id="paperCategory">
            <option>Law/Politics</option>
            <option>STEM</option>
            <option>Articles</option>
          </select>
        </label>
        <label>Short description <textarea id="paperDesc" rows="3" required></textarea></label>
        <label>PDF file <input id="paperPDF" type="file" accept="application/pdf" required></label>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:6px">
          <button type="submit" class="btn-rect">Upload Paper</button>
        </div>
      </form>
    </section>
  </main>

  <!-- admin modal -->
  <div id="modal" class="modal-back" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h3 style="margin:0 0 10px 0">Admin Login</h3>
      <input id="adminPass" type="password" placeholder="Admin password" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.12)">
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button class="btn-rect" onclick="verifyAdmin()">Submit</button>
        <button class="btn-rect" onclick="closeAdminModal()">Cancel</button>
      </div>
    </div>
  </div>

<script>
/* Data storage: uses localStorage 'gyj_papers' to persist */
const STORAGE_KEY = 'gyj_papers_v1';
let papers = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
let currentFilter = 'All';
const ADMIN_PASSWORD = 'OctObeR7@2009#';

/* Basic navigation */
function showSection(id){
  document.querySelectorAll('.page').forEach(s => s.style.display = 'none');
  const el = document.getElementById(id);
  if(el) el.style.display = 'flex';
  // close mobile nav when navigating
  closePrimaryNav();
  if(id === 'papers') renderPapers();
}

/* Primary nav toggle for mobile (sliding) */
const primaryNav = document.getElementById('primaryNav');
const menuToggle = document.getElementById('menuToggle');
menuToggle.addEventListener('click', ()=> {
  const expanded = menuToggle.getAttribute('aria-expanded') === 'true';
  menuToggle.setAttribute('aria-expanded', String(!expanded));
  primaryNav.classList.toggle('show');
});

/* close nav helper */
function closePrimaryNav(){
  primaryNav.classList.remove('show');
  menuToggle.setAttribute('aria-expanded','false');
}

/* admin modal */
function openAdminModal(){
  document.getElementById('modal').style.display = 'flex';
  document.getElementById('modal').setAttribute('aria-hidden','false');
  document.getElementById('adminPass').value = '';
  document.getElementById('adminPass').focus();
}
function closeAdminModal(){
  document.getElementById('modal').style.display = 'none';
  document.getElementById('modal').setAttribute('aria-hidden','true');
}

/* verify admin - reveal upload form */
function verifyAdmin(){
  const v = document.getElementById('adminPass').value;
  if(v === ADMIN_PASSWORD){
    closeAdminModal();
    const uploadForm = document.getElementById('uploadForm');
    uploadForm.style.display = 'flex';
    showSection('submit'); // go to admin upload page
    alert('Admin access granted');
  } else {
    alert('Incorrect password');
  }
}

/* Upload handling - store file as dataURL in localStorage (no server) */
function submitPaper(){
  const title = document.getElementById('paperTitle').value.trim();
  const author = document.getElementById('paperAuthor').value.trim();
  const date = document.getElementById('paperDate').value;
  const category = document.getElementById('paperCategory').value;
  const desc = document.getElementById('paperDesc').value.trim();
  const file = document.getElementById('paperPDF').files[0];

  if(!title || !author || !date || !desc || !file){ alert('Please fill all fields'); return; }

  const reader = new FileReader();
  reader.onload = function(evt){
    papers.push({
      id: Date.now(),
      title, author, date, category, desc,
      data: evt.target.result, // data URL
      filename: file.name
    });
    localStorage.setItem(STORAGE_KEY, JSON.stringify(papers));
    // reset and render list
    document.getElementById('paperTitle').value='';
    document.getElementById('paperAuthor').value='';
    document.getElementById('paperDate').value='';
    document.getElementById('paperDesc').value='';
    document.getElementById('paperPDF').value='';
    alert('Paper uploaded');
    showSection('papers');
    renderPapers();
  };
  reader.readAsDataURL(file);
}

/* Filtering & render papers (title, author, date only) */
function filterPapers(category){
  currentFilter = category;
  // update active class on buttons
  document.querySelectorAll('.filter-btns button').forEach(btn=>{
    btn.classList.toggle('active', btn.innerText === category);
  });
  renderPapers();
}

function renderPapers(){
  const container = document.getElementById('papersList');
  container.innerHTML = '';
  const filtered = papers.filter(p => currentFilter === 'All' || p.category === currentFilter);
  if(!filtered.length){
    container.innerHTML = '<div style="color:rgba(255,255,255,0.9);font-size:1rem">No papers uploaded yet.</div>';
    return;
  }
  filtered.forEach(p => {
    const card = document.createElement('div');
    card.className = 'paper-card';
    card.innerHTML = `
      <h3>${escapeHtml(p.title)}</h3>
      <div class="paper-meta">Author: ${escapeHtml(p.author)} | Date: ${escapeHtml(p.date)} | Category: ${escapeHtml(p.category)}</div>
    `;
    // clicking opens stored PDF data URL in a new tab
    card.addEventListener('click', ()=> {
      if(p.data){
        const win = window.open('', '_blank');
        // write minimal HTML to open pdf in new window (data URL)
        win.document.write(`<html><head><title>${escapeHtml(p.title)}</title></head><body style="margin:0"><iframe src="${p.data}" style="width:100vw;height:100vh;border:none"></iframe></body></html>`);
        win.document.close();
      } else {
        alert('PDF not available');
      }
    });
    // If admin, show delete button
    if(isAdmin()){
      const del = document.createElement('button');
      del.textContent = 'Delete';
      del.style.cssText = 'margin-top:8px;padding:6px 10px;border-radius:6px;border:1px solid rgba(0,0,0,0.15);background:#fff;cursor:pointer;';
      del.addEventListener('click', (e)=>{
        e.stopPropagation();
        if(confirm('Delete this paper?')){
          papers = papers.filter(x => x.id !== p.id);
          localStorage.setItem(STORAGE_KEY, JSON.stringify(papers));
          renderPapers();
        }
      });
      card.appendChild(del);
    }
    container.appendChild(card);
  });
}

/* admin check helper (simple check by current session flag) */
function isAdmin(){
  // This site keeps a lightweight session flag in sessionStorage when admin logs in.
  // For simplicity we treat presence of 'gyj_admin' key as admin true.
  return !!sessionStorage.getItem('gyj_admin');
}

/* If admin verified earlier in this session, show upload form */
function setAdminSession(){
  sessionStorage.setItem('gyj_admin','1');
  document.getElementById('uploadForm').style.display = 'flex';
}
/* update verifyAdmin to set session when correct */
function verifyAdmin(){
  const v = document.getElementById('adminPass').value;
  if(v === ADMIN_PASSWORD){
    closeAdminModal();
    setAdminSession();
    showSection('submit');
    alert('Admin access granted');
  } else {
    alert('Incorrect password');
  }
}

/* escape helper to avoid raw injection into HTML when showing titles */
function escapeHtml(str){
  return String(str || '').replace(/[&<>"']/g, function(m){
    return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m];
  });
}

/* initial state: show home; attach menu toggle keyboard accessibility */
showSection('home');

// Accessibility: close nav on resize to avoid stuck nav state
window.addEventListener('resize', ()=> {
  if(window.innerWidth > 720) {
    primaryNav.classList.remove('show');
    menuToggle.setAttribute('aria-expanded','false');
  }
});

/* expose some functions for other UI elements */
window.openAdminModal = openAdminModal;
window.closeAdminModal = closeAdminModal;
window.verifyAdmin = verifyAdmin;
window.submitPaper = submitPaper;
window.filterPapers = filterPapers;
window.showSection = showSection;
</script>
</body>
</html>
